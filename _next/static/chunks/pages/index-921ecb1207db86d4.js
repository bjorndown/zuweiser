(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(10)}])},10:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(5893),i=n(5988),a=n.n(i),c=n(7294),s=function(e){var t=e.onChange,n=(0,c.useState)("\t"),i=n[0];n[1];return(0,r.jsxs)("div",{className:"jsx-52b46eb33b5d1e4c container",children:[(0,r.jsx)("textarea",{rows:20,onChange:function(e){return t(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.split("\n").slice(t?1:0).map((function(e){return e.trim().split(i).map((function(e){return e.trim()}))})).filter((function(e){return 1!==e.length}))}(e.target.value))},className:"jsx-52b46eb33b5d1e4c input"}),(0,r.jsx)(a(),{id:"52b46eb33b5d1e4c",children:".container.jsx-52b46eb33b5d1e4c{display:-webkit-box;\ndisplay:-webkit-flex;\ndisplay:-ms-flexbox;\ndisplay:flex;\nflex-flow:column wrap;\nmargin:1rem 0}\n.input.jsx-52b46eb33b5d1e4c{max-width:700px}"})]})},o=function(e){var t=e.text;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{title:t,className:"jsx-cd050b290067be02 explanation",children:"?"}),(0,r.jsx)(a(),{id:"cd050b290067be02",children:".explanation.jsx-cd050b290067be02{background:var(--green);\nmargin-left:0.3rem;\npadding:0 5px;\nfont-weight:bold;\nborder-radius:50%}"})]})},l=n(4184),d=n.n(l),u=function(e){var t=e.error,n=e.columns,i=e.table;return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)("span",{className:"jsx-939ad00f6424421d error",children:t}),!t&&n.length>0&&(0,r.jsx)("div",{className:"jsx-939ad00f6424421d preview",children:(0,r.jsxs)("table",{className:"jsx-939ad00f6424421d",children:[(0,r.jsx)("thead",{className:"jsx-939ad00f6424421d",children:(0,r.jsx)("tr",{className:"jsx-939ad00f6424421d",children:n.map((function(e){return(0,r.jsx)("th",{title:e.matchedAs?'Erkannt als "'.concat(e.matchedAsLabel,'"'):"",className:"jsx-939ad00f6424421d "+(d()({"matched-column":e.matchedAs})||""),children:e.label},e.label)}))})}),(0,r.jsx)("tbody",{className:"jsx-939ad00f6424421d",children:i.slice(1).map((function(e,t){return(0,r.jsx)("tr",{className:"jsx-939ad00f6424421d",children:e.map((function(e,n){return(0,r.jsx)("td",{className:"jsx-939ad00f6424421d",children:e},"cell-".concat(t,"-").concat(n))}))},"row-".concat(t))}))})]})}),(0,r.jsx)(a(),{id:"939ad00f6424421d",children:".preview.jsx-939ad00f6424421d{height:10rem;\noverflow:auto}\n.matched-column.jsx-939ad00f6424421d{background:var(--green)}\nth.jsx-939ad00f6424421d{position:-webkit-sticky;\nposition:sticky;\ntop:0;\nleft:0}\n.error.jsx-939ad00f6424421d{background:#cd5c5c}"})]})},f=function(e){var t,n,i=e.onChange,l=(0,c.useState)(!0),d=l[0],f=l[1],h=(0,c.useState)(),m=h[0],x=h[1],p=function(e){return"id"===e.toLowerCase()},b=function(e){return e.toLowerCase().startsWith("name")||e.toLowerCase().startsWith("title")},j=function(e){return e.toLowerCase().startsWith("limit")||e.toLowerCase().includes("max")},y=function(e){return e.toLowerCase().startsWith("minimum")},v=(0,c.useMemo)((function(){return null!==(t=null===m||void 0===m?void 0:m[0])&&void 0!==t?t:[]}),[m]),g=(0,c.useMemo)((function(){return null!==(n=null===m||void 0===m?void 0:m.slice(1))&&void 0!==n?n:[]}),[m]),w=(0,c.useMemo)((function(){return v.indexOf(v.find((function(e){return p(e)})))}),[v]),N=(0,c.useMemo)((function(){return v.indexOf(v.find((function(e){return b(e)})))}),[v]),k=(0,c.useMemo)((function(){return v.indexOf(v.find((function(e){return j(e)})))}),[v]),S=(0,c.useMemo)((function(){return v.indexOf(v.find((function(e){return y(e)})))}),[v]),P=(0,c.useMemo)((function(){return v.length?v.map((function(e,t){return p(e)?{label:e,matchedAsLabel:"ID",matchedAs:"id"}:b(e)?{label:e,matchedAs:"title",matchedAsLabel:"Titel"}:j(e)?{label:e,matchedAs:"limit",matchedAsLabel:"Limit"}:y(e)?{label:e,matchedAs:"minimum",matchedAsLabel:"Minimum"}:{label:e,matchedAs:void 0,matchedAsLabel:void 0}})):[]}),[v]),O=(0,c.useMemo)((function(){if(m)return!P||P.length<3?"Keine oder zu wenige Spalten erkannt. Minimum an Spalten: ID, Titel, Limit, Minimum":!P.find((function(e){return"id"===e.matchedAs}))?'Spalte "ID" nicht erkannt':!P.find((function(e){return"title"===e.matchedAs}))?'Spalte "Titel" nicht erkannt':!P.find((function(e){return"limit"===e.matchedAs}))?'Spalte "Limit" nicht erkannt':!!P.find((function(e){return"minimum"===e.matchedAs}))?void 0:'Spalte "Minimum" nicht erkannt'}),[m,P]),M=(0,c.useMemo)((function(){return O||!g.length?[]:g.map((function(e){return{id:e[w],title:e[N],limit:parseInt(e[k]),minimum:parseInt(e[S])}}))}),[O,g,v]);return(0,c.useEffect)((function(){O||i({activities:M,shuffleBeforeMatch:d})}),[O,M,d]),(0,r.jsxs)("div",{className:"jsx-72c422c54a3a4624 container",children:[(0,r.jsx)("h2",{className:"jsx-72c422c54a3a4624",children:"Aktivit\xe4ten"}),(0,r.jsx)("input",{type:"checkbox",id:"shuffleActivitiesBeforeMatch",checked:d,onChange:function(){return f(!d)},className:"jsx-72c422c54a3a4624"}),(0,r.jsxs)("label",{htmlFor:"shuffleActivitiesBeforeMatch",className:"jsx-72c422c54a3a4624",children:["Vor dem Zuweisen mischen",(0,r.jsx)(o,{text:"Ohne Mischen ist die Reihenfolge der Eintr\xe4ge in der Tabelle massgebend, d.h. fr\xfche Eintr\xe4ge werden bevorzugt"})]}),(0,r.jsx)(s,{onChange:function(e){return x(e)}}),(0,r.jsx)(u,{error:O,columns:P,table:m}),(0,r.jsx)(a(),{id:"72c422c54a3a4624",children:".container.jsx-72c422c54a3a4624{min-width:400px;\n-webkit-flex:1;\n-ms-flex:1;\nflex:1}"})]})},h=function(e){var t,n,i=e.onChange,l=(0,c.useState)(!0),d=l[0],f=l[1],h=(0,c.useState)(),m=h[0],x=h[1],p=function(e){return"id"===e.toLowerCase()},b=function(e){return e.toLowerCase().startsWith("prio")},j=(0,c.useMemo)((function(){return null!==(t=null===m||void 0===m?void 0:m[0])&&void 0!==t?t:[]}),[m]),y=(0,c.useMemo)((function(){return null!==(n=null===m||void 0===m?void 0:m.slice(1))&&void 0!==n?n:[]}),[m]),v=(0,c.useMemo)((function(){return j.indexOf(j.find((function(e){return p(e)})))}),[j]),g=(0,c.useMemo)((function(){return j.filter(b).map((function(e){return j.indexOf(e)}))}),[j]),w=(0,c.useMemo)((function(){if(!j.length)return[];var e=j.filter((function(e){return e.toLowerCase().startsWith("prio")}));return j.map((function(t){return p(t)?{label:t,matchedAsLabel:"ID",matchedAs:"id"}:b(t)?{label:t,matchedAs:"priority",matchedAsLabel:"Priorit\xe4t ".concat(e.indexOf(t)+1)}:{label:t,matchedAs:void 0,matchedAsLabel:void 0}}))}),[j]),N=(0,c.useMemo)((function(){if(m){if(!w||w.length<3)return"Keine oder zu wenige Spalten erkannt. Minimum an Spalten: ID, Priorit\xe4t 1, Priorit\xe4t 2";if(!!!w.find((function(e){return"id"===e.matchedAs})))return'Spalte "ID" nicht erkannt';var e=w.filter((function(e){return"priority"===e.matchedAs})).length;return 0===e?"Keine Priorit\xe4ten-Spalten erkannt":1===e?"Nur eine Priorit\xe4ten-Spalten erkannt":void 0}}),[m,w]),k=(0,c.useMemo)((function(){return N||!m?[]:y.map((function(e){return{id:e[v],priorities:e.filter((function(e,t){return g.includes(t)}))}}))}),[N,m,y,v,g]),S=(0,c.useMemo)((function(){return N||!m?[]:y.map((function(e){return{id:e[v],data:e.filter((function(e,t){return!g.concat(v).includes(t)}))}}))}),[N,m,y,v,g]);return(0,c.useEffect)((function(){N||i({participants:k,participantsData:S,shuffleBeforeMatch:d})}),[N,k,S,d]),(0,r.jsxs)("div",{className:"jsx-e5979519b32ed23 container",children:[(0,r.jsx)("h2",{className:"jsx-e5979519b32ed23",children:"Teilnehmer"}),(0,r.jsx)("input",{type:"checkbox",id:"shuffleParticipantsBeforeMatch",checked:d,onChange:function(){return f(!d)},className:"jsx-e5979519b32ed23"}),(0,r.jsxs)("label",{htmlFor:"shuffleParticipantsBeforeMatch",className:"jsx-e5979519b32ed23",children:["Vor dem Zuweisen mischen",(0,r.jsx)(o,{text:"Ohne Mischen ist die Reihenfolge der Eintr\xe4ge in der Tabelle massgebend, d.h. fr\xfche Eintr\xe4ge werden bevorzugt"})]}),(0,r.jsx)(s,{onChange:function(e){return x(e)}}),(0,r.jsx)(u,{error:N,columns:w,table:m}),(0,r.jsx)(a(),{id:"e5979519b32ed23",children:".container.jsx-e5979519b32ed23{min-width:500px;\n-webkit-flex:1;\n-ms-flex:1;\nflex:1}"})]})},m=n(6026),x=n.n(m),p=function(e){var t=e.fulfilledPriorities,n=e.totalParticipants;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("ol",{children:t.map((function(e,t){return(0,r.jsxs)("li",{children:["Priorit\xe4t ",(0,r.jsx)("progress",{value:e,max:n})," ",e]},"priority-".concat(t))}))})})},b=function(e){var t=e.result,n=function(e){return"".concat(e+1,". Priorit\xe4t")};return(0,r.jsxs)("div",{className:"jsx-1eb6440d3202b42d",children:[(0,r.jsxs)("article",{className:"jsx-1eb6440d3202b42d statistics",children:[(0,r.jsxs)("section",{className:"jsx-1eb6440d3202b42d",children:[(0,r.jsx)("h3",{className:"jsx-1eb6440d3202b42d",children:"Kurz\xfcbersicht"}),(0,r.jsxs)("table",{className:"jsx-1eb6440d3202b42d",children:[(0,r.jsx)("thead",{className:"jsx-1eb6440d3202b42d",children:(0,r.jsxs)("tr",{className:"jsx-1eb6440d3202b42d",children:[(0,r.jsx)("th",{className:"jsx-1eb6440d3202b42d",children:"Kurs"}),(0,r.jsx)("th",{className:"jsx-1eb6440d3202b42d",children:"Zugewiesene Teilnehmer"}),(0,r.jsx)("th",{className:"jsx-1eb6440d3202b42d",children:"Minimum"}),(0,r.jsx)("th",{className:"jsx-1eb6440d3202b42d",children:"Limit"})]})}),(0,r.jsxs)("tbody",{className:"jsx-1eb6440d3202b42d",children:[t.activities.map((function(e){return(0,r.jsxs)("tr",{className:"jsx-1eb6440d3202b42d",children:[(0,r.jsx)("td",{className:"jsx-1eb6440d3202b42d",children:e.title}),(0,r.jsx)("td",{className:"jsx-1eb6440d3202b42d number",children:e.participants.length}),(0,r.jsx)("td",{className:"jsx-1eb6440d3202b42d number",children:e.minimum}),(0,r.jsx)("td",{className:"jsx-1eb6440d3202b42d number",children:e.limit})]},"activity-".concat(e.id))})),(0,r.jsxs)("tr",{className:"jsx-1eb6440d3202b42d totals",children:[(0,r.jsx)("td",{className:"jsx-1eb6440d3202b42d",children:"Total"}),(0,r.jsx)("td",{className:"jsx-1eb6440d3202b42d number",children:t.participants.filter((function(e){return e.assigned})).length}),(0,r.jsx)("td",{className:"jsx-1eb6440d3202b42d number",children:t.activities.map((function(e){return e.minimum})).reduce((function(e,t){return e+t}))}),(0,r.jsx)("td",{className:"jsx-1eb6440d3202b42d number",children:t.activities.map((function(e){return e.limit})).reduce((function(e,t){return e+t}))})]})]})]})]}),(0,r.jsxs)("section",{className:"jsx-1eb6440d3202b42d",children:[(0,r.jsx)("h3",{className:"jsx-1eb6440d3202b42d",children:"Verteilung der erf\xfcllten Priorit\xe4ten"}),(0,r.jsx)(p,{fulfilledPriorities:function(e){var t={},r=!0,i=!1,a=void 0;try{for(var c,s=e.activities[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var o=c.value,l=!0,d=!1,u=void 0;try{for(var f,h=o.participants[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=f.value.priorities.indexOf(o.id);t[n(m)]?t[n(m)]++:t[n(m)]=1}}catch(x){d=!0,u=x}finally{try{l||null==h.return||h.return()}finally{if(d)throw u}}}}catch(x){i=!0,a=x}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return Object.keys(t).map((function(e){return t[e]}))}(t),totalParticipants:t.participants.length})]})]}),(0,r.jsx)(a(),{id:"1eb6440d3202b42d",children:".statistics.jsx-1eb6440d3202b42d{display:-webkit-box;\ndisplay:-webkit-flex;\ndisplay:-ms-flexbox;\ndisplay:flex;\nflex-flow:row wrap;\ngap:1rem}"})]})},j=function(e){var t,n=e.result,i=e.participantsData,c=function(e){return e.filter((function(e){return!e.assigned}))},s=function(e){return"".concat(e.title," (").concat(e.participants.length," / ").concat(e.limit,")")};return(0,r.jsxs)("div",{className:"jsx-c25ce83585dbea3d",children:[(0,r.jsx)("div",{className:"jsx-c25ce83585dbea3d",children:(0,r.jsx)("h2",{className:"jsx-c25ce83585dbea3d",children:"Resultat"})}),(0,r.jsx)(b,{result:n}),(0,r.jsxs)("div",{className:"jsx-c25ce83585dbea3d unassignable-participants",children:[(0,r.jsx)("h3",{className:"jsx-c25ce83585dbea3d",children:"Nicht-zuweisbare Teilnehmer"}),c(n.participants).length>0&&(0,r.jsxs)("table",{className:"jsx-c25ce83585dbea3d",children:[(0,r.jsx)("thead",{className:"jsx-c25ce83585dbea3d",children:(0,r.jsxs)("tr",{className:"jsx-c25ce83585dbea3d",children:[(0,r.jsx)("th",{className:"jsx-c25ce83585dbea3d",children:"ID"}),(0,r.jsx)("th",{className:"jsx-c25ce83585dbea3d"}),(0,r.jsx)("th",{className:"jsx-c25ce83585dbea3d"}),(0,r.jsx)("th",{className:"jsx-c25ce83585dbea3d"}),(t=n.participants,x()(1,t[0].priorities.length+1)).map((function(e){return(0,r.jsxs)("th",{className:"jsx-c25ce83585dbea3d",children:["Priorit\xe4t ",e]},e)}))]})}),(0,r.jsx)("tbody",{className:"jsx-c25ce83585dbea3d",children:c(n.participants).map((function(e,t){return(0,r.jsxs)("tr",{className:"jsx-c25ce83585dbea3d",children:[(0,r.jsx)("td",{className:"jsx-c25ce83585dbea3d",children:t+1}),i[e.id].map((function(e,t){return(0,r.jsx)("td",{className:"jsx-c25ce83585dbea3d",children:e},"property-".concat(t))})),e.priorities.map((function(e){return(0,r.jsx)("td",{className:"jsx-c25ce83585dbea3d",children:n.activities.find((function(t){return t.id===e})).title},e)}))]},"participant-".concat(e.id,"-").concat(t))}))})]})]}),(0,r.jsxs)("section",{className:"jsx-c25ce83585dbea3d",children:[(0,r.jsx)("h3",{className:"jsx-c25ce83585dbea3d",children:"Zuweisungen pro Kurs"}),(0,r.jsx)("div",{className:"jsx-c25ce83585dbea3d matching-results",children:n.activities.map((function(e){return(0,r.jsxs)("article",{className:"jsx-c25ce83585dbea3d matched-activity-container",children:[(0,r.jsx)("h4",{className:"jsx-c25ce83585dbea3d",children:s(e)}),(0,r.jsxs)("table",{className:"jsx-c25ce83585dbea3d matching-result",children:[(0,r.jsx)("thead",{className:"jsx-c25ce83585dbea3d",children:(0,r.jsxs)("tr",{className:"jsx-c25ce83585dbea3d",children:[(0,r.jsx)("th",{className:"jsx-c25ce83585dbea3d",children:"ID"}),(0,r.jsx)("th",{className:"jsx-c25ce83585dbea3d"}),(0,r.jsx)("th",{className:"jsx-c25ce83585dbea3d"}),(0,r.jsx)("th",{className:"jsx-c25ce83585dbea3d"}),(0,r.jsx)("th",{className:"jsx-c25ce83585dbea3d",children:"Priorit\xe4t"})]})}),(0,r.jsx)("tbody",{className:"jsx-c25ce83585dbea3d",children:e.participants.map((function(t,n){return(0,r.jsxs)("tr",{className:"jsx-c25ce83585dbea3d",children:[(0,r.jsx)("td",{className:"jsx-c25ce83585dbea3d",children:n+1}),i[t.id].map((function(e,t){return(0,r.jsx)("td",{className:"jsx-c25ce83585dbea3d",children:e},"property-".concat(t))})),(0,r.jsx)("td",{className:"jsx-c25ce83585dbea3d priority-column",children:t.priorities.indexOf(e.id)+1})]},"participant-".concat(t.id))}))})]})]},"activity-".concat(e.id))}))})]}),(0,r.jsx)(a(),{id:"c25ce83585dbea3d",children:"table.matching-result.jsx-c25ce83585dbea3d{min-width:350px;\nmax-width:550px}\n.matching-results.jsx-c25ce83585dbea3d{display:-webkit-box;\ndisplay:-webkit-flex;\ndisplay:-ms-flexbox;\ndisplay:flex;\nflex-flow:row wrap;\ngap:1rem}\n.matching-results.jsx-c25ce83585dbea3d h3.jsx-c25ce83585dbea3d{display:block}\n.matched-activity-container.jsx-c25ce83585dbea3d{display:block}\n#table.unassignable-participants.jsx-c25ce83585dbea3d{max-width:800px}\n.priority-column.jsx-c25ce83585dbea3d{text-align:center}\nul.jsx-c25ce83585dbea3d{margin:0;\npadding:0;\nlist-style:none}"})]})},y=n(9983),v=n.n(y);function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function k(e,t,n){return k=N()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&E(i,n.prototype),i},k.apply(null,arguments)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function A(e,t){return!t||"object"!==_(t)&&"function"!==typeof t?g(e):t}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}var _=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function C(e){var t="function"===typeof Map?new Map:void 0;return C=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return k(e,arguments,P(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),E(r,e)},C(e)}function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}var T=function(e){O(n,e);var t=L(n);function n(e,r,i,a){var c;return w(this,n),(c=t.call(this,"".concat(i,"=").concat(a," not unique for ").concat(e," with id=").concat(r))).entityType=e,c.entityId=r,c.propertyName=i,c.propertyValue=a,Object.setPrototypeOf(g(c),n.prototype),c}return n}(C(Error)),D=function(e){O(n,e);var t=L(n);function n(e,r,i,a){var c;return w(this,n),(c=t.call(this,"".concat(e," with id=").concat(r," does not exist. Referred to by ").concat(i," with id=").concat(a))).entityType=e,c.id=r,c.referrerType=i,c.referrerId=a,Object.setPrototypeOf(g(c),n.prototype),c}return n}(C(Error)),R=function(e,t){!function(e){var t=new Set;e.forEach((function(e){if(t.has(e.id))throw new T("Activity",e.id,"id",e.id);t.add(e.id)}))}(t),function(e){var t=new Set;e.forEach((function(e){if(t.has(e.id))throw new T("Participant",e.id,"id",e.id);t.add(e.id)}))}(e),function(e){e.forEach((function(e){if(e.priorities.length!==new Set(e.priorities).size)throw new T("Participant",e.id,"priorities",e.priorities.toString())}))}(e),function(e,t){var n=t.map((function(e){return e.id}));e.forEach((function(e){e.priorities.forEach((function(t){if(!n.find((function(e){return e===t})))throw new D("Activity",t,"Participant",e.id)}))}))}(e,t)};function F(e,t){R(e.participants,t.activities);var n=(e.shuffleBeforeMatch?v()(e.participants):e.participants).map((function(e){return function(e){return M({},e,{_assigned:!1,set assigned(e){if(this._assigned&&e)throw Error("Participant ".concat(this.id," already assigned"));this._assigned=e},get assigned(){return this._assigned}})}(e)})),r=(t.shuffleBeforeMatch?v()(t.activities):t.activities).map((function(e){return function(e){return M({},e,{assignParticipant:function(e){if(!(this.participants.length<this.limit))throw new Error('Activity title="'.concat(this.title," is full"));this.participants.push(e)},isNotFull:function(){return this.participants.length<this.limit},participants:[]})}(e)}));return B(n,r),{participants:n,activities:r}}var B=function(e,t){var n=I(t),r=e[0].priorities.length,i=!0,a=!1,c=void 0;try{for(var s,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,d=z(e,l,r);console.log(l.title);var u=W(l,d,r);console.log("Minimal priority to fill to minimum ".concat(u.priority+1,", index ").concat(u.index));var f=!0,h=!1,m=void 0;try{for(var p,b=x()(r)[Symbol.iterator]();!(f=(p=b.next()).done);f=!0){var j=p.value;console.log("Prio ".concat(j+1,": ").concat(d[j].length))}}catch(ee){h=!0,m=ee}finally{try{f||null==b.return||b.return()}finally{if(h)throw m}}Z(l,d,u)}}catch(ee){a=!0,c=ee}finally{try{i||null==o.return||o.return()}finally{if(a)throw c}}console.log("Second round");var y=!0,v=!1,g=void 0;try{for(var w,N=V(n)[Symbol.iterator]();!(y=(w=N.next()).done);y=!0){var k=w.value,S=z(e,k,r),P=k.minimum-k.participants.length,O=S.flat();for(console.log("Try to fill delta ".concat(P," for ").concat(k.title));O.length>0&&k.minimum-k.participants.length>0;){var M=O.shift();!M.assigned&&k.isNotFull()?(k.assignParticipant(M),M.assigned=!0):console.warn("".concat(M.id," already matched!!"))}}}catch(ee){v=!0,g=ee}finally{try{y||null==N.return||N.return()}finally{if(v)throw g}}console.log("final round");var A=!0,E=!1,_=void 0;try{for(var C,L=X(n,e,r)[Symbol.iterator]();!(A=(C=L.next()).done);A=!0){var T=C.value;console.log(T.title);var D=z(e,T,r),R=!0,F=!1,B=void 0;try{for(var K,q=x()(r)[Symbol.iterator]();!(R=(K=q.next()).done);R=!0){var G=K.value,H=!0,J=!1,Q=void 0;try{for(var U,Y=x()(D[G].length)[Symbol.iterator]();!(H=(U=Y.next()).done);H=!0){U.value;var $=D[G].shift();!$.assigned&&T.isNotFull()?(T.assignParticipant($),$.assigned=!0):console.warn("".concat($.id," already matched!!"))}}catch(ee){J=!0,Q=ee}finally{try{H||null==Y.return||Y.return()}finally{if(J)throw Q}}}}catch(ee){F=!0,B=ee}finally{try{R||null==q.return||q.return()}finally{if(F)throw B}}}}catch(ee){E=!0,_=ee}finally{try{A||null==L.return||L.return()}finally{if(E)throw _}}},I=function(e){return e.filter((function(e){return e.limit>0}))},z=function(e,t,n){var r=x()(n).map((function(){return[]})),i=!0,a=!1,c=void 0;try{for(var s,o=function(e,n){var i=n.value;r.forEach((function(e,n){i.priorities[n]===t.id&&r[n].push(i)}))},l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)o(0,s)}catch(d){a=!0,c=d}finally{try{i||null==l.return||l.return()}finally{if(a)throw c}}return r},K=function(e){return e.filter((function(e){return!e.assigned}))},W=function(e,t,n){for(var r=0,i=[],a=t.map((function(e){return e.slice(0)}));i.length<e.minimum&&a.flat().length>0&&r<n;){if(0===a[r].length&&r<n&&(r+=1),i.push(a[r].shift()),0===a.flat().length&&i.length<e.minimum)return{priority:-1,index:-1};if(i.length===e.minimum)break}return{priority:r,index:t[r].length-a[r].length-1}},Z=function(e,t,n){var r=!0,i=!1,a=void 0;try{for(var c,s=x()(n.priority)[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var o=c.value,l=!0,d=!1,u=void 0;try{for(var f,h=x()(t[o].length)[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){f.value;var m=t[o].shift();!m.assigned&&e.isNotFull()?(e.assignParticipant(m),m.assigned=!0):console.warn("".concat(m.id," already matched!!"))}}catch(w){d=!0,u=w}finally{try{l||null==h.return||h.return()}finally{if(d)throw u}}}}catch(w){i=!0,a=w}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var p=!0,b=!1,j=void 0;try{for(var y,v=x()(n.index+1)[Symbol.iterator]();!(p=(y=v.next()).done);p=!0){y.value;var g=t[n.priority].shift();!g.assigned&&e.isNotFull()?(e.assignParticipant(g),g.assigned=!0):console.warn("".concat(g.id," already matched!!"))}}catch(w){b=!0,j=w}finally{try{p||null==v.return||v.return()}finally{if(b)throw j}}},V=function(e){return e.sort((function(e,t){var n=e.minimum-e.participants.length;return t.minimum-t.participants.length-n}))},X=function(e,t,n){return e.sort((function(e,r){var i=!0,a=!1,c=void 0;try{for(var s,o=x()(n)[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,d=z(t,e,n),u=z(t,r,n);if(K(u[l]).length>K(d[l]).length)return 1;if(K(d[l]).length>K(u[l]).length)return-1}}catch(f){a=!0,c=f}finally{try{i||null==o.return||o.return()}finally{if(a)throw c}}return 0}))},q=function(){var e,t=(0,c.useState)(),n=t[0],i=t[1],s=(0,c.useState)(),o=s[0],l=s[1],d=(0,c.useState)(),u=d[0],m=d[1],x=(0,c.useMemo)((function(){return n&&o}),[n,o]),p=(0,c.useMemo)((function(){return Object.fromEntries(null!==(e=null===o||void 0===o?void 0:o.participantsData.map((function(e){return[e.id,e.data]})))&&void 0!==e?e:[])}),[o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"jsx-71568fd074756783",children:"Zuweiser"}),(0,r.jsxs)("div",{id:"config",className:"jsx-71568fd074756783",children:[(0,r.jsx)(f,{onChange:i}),(0,r.jsx)(h,{onChange:l})]}),x&&(0,r.jsx)("button",{onClick:function(){m(F(o,n))},className:"jsx-71568fd074756783 matchButton",children:"Priorit\xe4ten aufl\xf6sen"}),u&&(0,r.jsx)(j,{result:u,participantsData:p}),(0,r.jsx)(a(),{id:"71568fd074756783",children:"@media screen and (min-width:500px) {#config.jsx-71568fd074756783{flex-flow:column wrap}}\n#config.jsx-71568fd074756783{display:-webkit-box;\ndisplay:-webkit-flex;\ndisplay:-ms-flexbox;\ndisplay:flex;\nflex-flow:row wrap;\n-webkit-box-pack:start;\n-ms-flex-pack:start;\n-webkit-justify-content:flex-start;\njustify-content:flex-start;\n-webkit-column-gap:1rem;\ncolumn-gap:1rem}\n.matchButton.jsx-71568fd074756783{margin-top:1rem;\npadding:0.5rem;\nfont-size:larger}"})]})}}},function(e){e.O(0,[802,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);